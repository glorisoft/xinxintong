<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<base href='/'>
		<link href="/static/css/bootstrap.min.css" rel="stylesheet">
		<link href="/static/css/tms.css?_=1" rel="stylesheet">
		<link href="/views/ytx/pl/fe/site/console.css?_=2" rel="stylesheet">
		<title>团队——工作台</title>
	</head>
	<body ng-app='app' ng-controller='ctrlSite'>
		<nav class='navbar navbar-default'>
			<div class='container'>
				<div class='navbar-header'>
                    <a class='navbar-brand' href='/rest/pl/fe' target='_self'><i class='glyphicon glyphicon-chevron-left'></i> 我的工作台</a>
                </div>
				<ul class='nav navbar-nav site'>
					<li class='active'><a href='/rest/pl/fe/site/console?site={{siteId}}'>工作台</a></li>
					<li><a href='/rest/pl/fe/site/coworker?site={{siteId}}' target='_self'>团队成员</a></li>
					<li><a href='/rest/pl/fe/template/site?site={{siteId}}' target='_self'>模板库</a></li>
					<li><a href='/rest/pl/fe/file?site={{siteId}}' target='_self'>图片库</a></li>
					<li><a href='/rest/pl/fe/site/setting?site={{siteId}}' target='_self'>团队设置</a></li>
				</ul>
			</div>
		</nav>
		<div class='container' ng-controller='ctrlConsole'>
			<div class='row'>
				<div class='col-md-12'>
					<nav class="navbar navbar-default">
						<form class="navbar-form navbar-left">
							<select class='form-control category' ng-model="matterType" ng-change="chooseMatterType()">
								<option value='recent'>最近</option>
								<option value='mission'>项目</option>
								<option value='article'>项目资料</option>
								<option value='registration'>报名</option>
								<option value='voting'>评价</option>
								<option value='signin'>签到</option>
								<option value='group'>分组</option>
								<option value='enroll'>通用登记</option>
								<option value='channel'>频道</option>
								<option value='recycle'>回收站</option>
							</select>
							<button class='btn btn-default' ng-if="matterType!=='recent'" ng-click="chooseMatterType('recent')">最近</button>
							<button class='btn btn-default' ng-if="matterType!=='mission'" ng-click="chooseMatterType('mission')">项目</button>
						</form>
						<form class="navbar-form navbar-right" style='margin-right:0'>
							<button uib-popover-template="'addMatter.html'" popover-placement="bottom" popover-append-to-body='true' popover-trigger="outsideClick" popover-title="添加素材" class='btn btn-default'><i class='glyphicon glyphicon-plus'></i> <i class='caret'></i></button>
						</form>
					</nav>
				</div>
			</div>
			<div class='row'>
				<div class='col-md-4' ng-repeat='m in matters' ng-class="{'recycle':matterType==='recycle'}">
					<div class='thumbnail' ng-click="open(m)" ng-class="m.matter_scenario||m.matter_type||''" ng-mouseenter="entered=true" ng-mouseleave="entered=false">
						<h4 class='title' ng-bind='m.matter_title||m.title'></h4>
						<p class='summary' ng-bind='m.matter_summary||m.summary'></p>
						<div class='attr'>
							<div class='operator_name' ng-bind='m.operator_name||m.creater_name'></div>
							<div class='modify_at' title='修改时间' ng-bind="(m.operate_at||m.modify_at||m.join_at||m.create_at)*1000|date:'yy-MM-dd HH:mm'"></div>
						</div>
						<div class='actions' ng-if="entered">
							<button class='btn btn-default' title='复制' ng-if="matterType!=='recycle'" ng-click="copyMatter($event,m)">复制</button>
							<button class='btn btn-default' title='删除' ng-if="matterType!=='recycle'" ng-click="removeMatter($event,m)"><span class='glyphicon glyphicon-remove'></span></button>
							<button class='btn btn-default' title='恢复' ng-if="matterType==='recycle'" ng-click="restoreMatter(m)">恢复</button>
						</div>
					</div>
				</div>
				<div class='col-md-12'>
					<button class='btn btn-block btn-default' ng-click="moreMatters()" ng-if="page.total>matters.length">更多</button>
				</div>
			</div>
		</div>
		<script type="text/ng-template" id="addMatter.html">
            <div id="addMatter">
            	<div class='form-group'>
            		<button class='btn btn-default' ng-click="addMission()">项目</button>
            	</div>
            	<div class='form-group'>
            		<button class='btn btn-default' ng-click="addArticle()">项目资料</button>
            	</div>
            	<div class='form-group'>
            		<button class='btn btn-default' ng-click="addEnrollByTemplate('registration')">在线报名</button>
            		<button class='btn btn-default' ng-click="addEnrollByTemplate('voting')">评价</button>
            		<button class='btn btn-default' ng-click="addSignin()">签到</button>
            		<button class='btn btn-default' ng-click="addGroup()">分组</button>
            		<button class='btn btn-default' ng-click="addMatter('enroll')">通用登记</button>
            	</div>
            	<div class='form-group'>
            		<button class='btn btn-default' ng-click="addChannel()">频道</button>
            	</div>
            <div>
        </script>
        <script src="/static/js/jquery.min.js"></script>
		<script src="/static/js/angular.min.js"></script>
		<script src="/static/js/angular-route.min.js"></script>
		<script src="/static/js/angular-sanitize.min.js"></script>
		<script src="/static/js/ui-bootstrap-tpls.min.js"></script>
		<script src="/static/js/ui-tms.js?_=1"></script>
		<script src="/static/js/xxt.ui.js?_=1"></script>
		<script src="/static/js/xxt.ui.tmplshop.js?_=2"></script>
		<script src="/views/ytx/pl/fe/site/console.js?_=7"></script>
	</body>
</html>